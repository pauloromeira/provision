---
- name: System > Configure RPM Fusion free repos (fedora)
  tags: rpmfusion-free,rpmfusion
  when: os_id == "fedora"
  block:
    - name: System > Install RPM Fusion free GPG key (fedora)
      rpm_key:
        key: "https://rpmfusion.org/keys?action=AttachFile&do=get&target=RPM-GPG-KEY-rpmfusion-free-fedora-2020"
        state: present

    - name: System > Add RPM Fusion free repos (fedora)
      dnf:
        name: "https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-{{ ansible_distribution_major_version }}.noarch.rpm"

- name: System > Configure RPM Fusion nonfree repos (fedora)
  tags: rpmfusion-nonfree,rpmfusion
  when: os_id == "fedora"
  block:
    - name: System > Install RPM Fusion nonfree GPG key (fedora)
      rpm_key:
        key: "https://rpmfusion.org/keys?action=AttachFile&do=get&target=RPM-GPG-KEY-rpmfusion-nonfree-fedora-2020"
        state: present

    - name: System > Add RPM Fusion nonfree repos (fedora)
      dnf:
        name: "https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{ ansible_distribution_major_version }}.noarch.rpm"

- name: System > Install utilities
  package:
    name: "{{ item }}"
  loop:
    - bat
    - curl
    - ffmpeg
    - gcc
    - htop
    - jq
    - libnotify-bin
    - make
    - mkisofs
    - openvpn
    - openssh-client
    - pdftk
    - silversearcher-ag
    - sqlite3
    - tree
    - unrar
    - unzip
    - wget
    - xsel
    - at  # schedule commands to be executed at a particular time
    - wireguard
    # TODO: move to GUI
    - solaar  # logitech unifying utility
    - network-manager-openvpn
    - network-manager-openvpn-gnome
    - gnome-tweaks

- name: System > Disable autostart
  file:
    path: "/etc/xdg/autostart/{{ item }}.desktop"
    state: absent
  loop:
    - solaar  # TODO: move to GUI
    - orca-autostart
